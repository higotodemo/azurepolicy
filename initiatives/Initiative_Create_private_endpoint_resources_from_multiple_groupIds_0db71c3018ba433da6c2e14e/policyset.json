{
 "properties": {
  "displayName": "Initiative Create private endpoint resources from multiple groupIds",
  "policyType": "Custom",
  "description": "Group of policies that assign A records from groupId in multiple private endpoints \n[Policy Category]  PrivateDnsZoneGroupId",
  "metadata": {
   "category": "PrivateDnsZoneGroupId",
   "version": "0.1",
   "parameterScopes": {
    "privateDnsZoneId : DINE create private endpoint resource(A record) from groupId(redisCache)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A records) from groupId(blob)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A records) from groupId(redisEnterprise)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A records) from groupId(registry)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A records) for AKS from groupId(management)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A records) from groupId(iotHub)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A records) from groupId(iotDps)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A records) for IoT Central from groupId(IoTApps)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A records) for ADX from groupId(cluster)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A records) for ADT from groupId(API)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A records) for Event Grid from groupId(domain)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A records) for Event Grid  from groupId(topic)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A records) for Event Hubs from groupId(namespace)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55"
   },
   "createdBy": "a3e3cca2-170d-40e8-b490-b298da8fceba",
   "createdOn": "2023-01-06T08:07:20.5245962Z",
   "updatedBy": "a3e3cca2-170d-40e8-b490-b298da8fceba",
   "updatedOn": "2023-01-06T08:13:47.7497606Z"
  },
  "parameters": {
   "IoTDPS": {
    "type": "string",
    "metadata": {
     "displayName": "IoT Device Provisioning Service",
     "description": "parameter for private DNS zone for IoT DPS",
     "strongType": "Microsoft.Network/privateDnsZones",
     "assignPermissions": true,
     "portalReview": true
    },
    "defaultValue": "privatelink.azure-devices-provisioning.net"
   },
   "iotHub": {
    "type": "string",
    "metadata": {
     "displayName": "IoT Hub",
     "description": "private DNS zone for IoT Hub",
     "strongType": "Microsoft.Network/privateDnsZones"
    },
    "defaultValue": "privatelink.azure-devices.net"
   },
   "ACR": {
    "type": "string",
    "metadata": {
     "displayName": "Azure Container Registry",
     "description": "private DNS zone for Azure Container Registry",
     "strongType": "Microsoft.Network/privateDnsZones"
    },
    "defaultValue": "privatelink.azurecr.io"
   },
   "RedisCache": {
    "type": "string",
    "metadata": {
     "displayName": "RedisCache",
     "description": "private DNS zone for Azure Redis Cache",
     "strongType": "Microsoft.Network/privateDnsZones"
    },
    "defaultValue": "privatelink.redis.cache.windows.net"
   },
   "blob": {
    "type": "string",
    "metadata": {
     "displayName": "Blob",
     "description": "private DNS zone for blob Storage",
     "strongType": "Microsoft.Network/privateDnsZones"
    },
    "defaultValue": "privatelink.blob.core.windows.net"
   },
   "EventGridCustomTopic": {
    "type": "string",
    "metadata": {
     "displayName": "EventGrid Custom Topic",
     "description": "private DNS zone for Event Grid Custom Topic",
     "strongType": "Microsoft.Network/privateDnsZones"
    },
    "defaultValue": "privatelink.eventgrid.azure.net"
   },
   "EventHubs": {
    "type": "string",
    "metadata": {
     "displayName": "EventHubs",
     "description": "private DNS zone for Event Hubs",
     "strongType": "Microsoft.Network/privateDnsZones"
    },
    "defaultValue": "privatelink.servicebus.windows.net"
   },
   "ADX": {
    "type": "string",
    "metadata": {
     "displayName": "ADX",
     "description": "private DNS zone for ADX (groupId=cluster)\n",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "AKS": {
    "type": "string",
    "metadata": {
     "displayName": "AKS",
     "description": "private DNS zone for Azure Kubernetes Service ",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "redisEnterprise": {
    "type": "string",
    "metadata": {
     "displayName": "redisEnterprise",
     "description": "private DNS zone for redis Entgerprise",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "IoTCentral": {
    "type": "string",
    "metadata": {
     "displayName": "IoTCentral",
     "description": "private DNS zone for IoT Central (groupId=IoTApps)",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "ADT": {
    "type": "string",
    "metadata": {
     "displayName": "ADT",
     "description": "private DNS zone for Azure Digital Twin (EventGrid)",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   },
   "EventGridDomain": {
    "type": "string",
    "metadata": {
     "displayName": "EventGridDomain",
     "description": "private DNS zone for Event Grid(domain)",
     "strongType": "Microsoft.Network/privateDnsZones"
    }
   }
  },
  "policyDefinitions": [
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A record) from groupId(redisCache)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/72ee238d-71c9-449b-b299-3680e9ffabd2",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('RedisCache')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) from groupId(blob)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/bcb9fc7d-cb1f-464b-a6ce-d671a6583290",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('blob')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) from groupId(redisEnterprise)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/16e25b0c-4d35-490b-81f9-8f980543a85b",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('redisEnterprise')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) from groupId(registry)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/1847ac82-fc0a-4745-b163-670bbe009a24",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('ACR')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) for AKS from groupId(management)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/1847ac82-fc0a-4745-b163-670bbe009a32",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('AKS')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) from groupId(iotHub)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/e36bea98-09cf-48c1-822a-958f756c4bf5",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('iotHub')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) from groupId(iotDps)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/e36bea98-09cf-48c1-822a-958f756c4c00",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('IoTDPS')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) for IoT Central from groupId(IoTApps)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/e36bea98-09cf-48c1-822a-958f756c4c0b",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('IoTCentral')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) for ADX from groupId(cluster)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/e36bea98-09cf-48c1-822a-958f756c4c16",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('ADX')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) for ADT from groupId(API)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/773f8c02-7b5e-4258-a556-6dfa6da56f9a",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('ADT')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) for Event Grid from groupId(domain)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/773f8c02-7b5e-4258-a556-6dfa6da56fa5",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('EventGridDomain')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) for Event Grid  from groupId(topic)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/773f8c02-7b5e-4258-a556-6dfa6da56fb0",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('EventGridCustomTopic')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) for Event Hubs from groupId(namespace)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/773f8c02-7b5e-4258-a556-6dfa6da56fbb",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('EventHubs')]"
     }
    },
    "groupNames": []
   }
  ],
  "policyDefinitionGroups": [
   {
    "name": "Private Link and DNS integration at scale(groupId only)",
    "displayName": "Private Link and DNS integration at scale(groupId only)",
    "description": "[Initiative] Group of policies that assign A records from groupId in multiple private endpoints "
   }
  ]
 },
 "id": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policySetDefinitions/0db71c3018ba433da6c2e14e",
 "type": "Microsoft.Authorization/policySetDefinitions",
 "name": "0db71c3018ba433da6c2e14e"
}