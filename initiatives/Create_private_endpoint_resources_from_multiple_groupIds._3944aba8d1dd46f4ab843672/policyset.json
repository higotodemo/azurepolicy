{
 "properties": {
  "displayName": "Create private endpoint resources from multiple groupIds.",
  "policyType": "Custom",
  "description": "Group of policies that assign A records from groupId in multiple private endpoints \n[Policy Category]  PrivateDnsZoneGroupId",
  "metadata": {
   "category": "PrivateDnsZoneGroupId",
   "version": "0.2",
   "parameterScopes": {
    "privateDnsZoneId : DINE create private endpoint resource(A records) from groupId(blob)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A record) from groupId(redisCache)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A records) from groupId(registry)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A records) from groupId(iotHub)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A records) from groupId(iotDps)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A records) for IoT Central from groupId(IoTApps)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A records) for ADX from groupId(cluster)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A records) for ADT from groupId(API)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A records) for Event Grid  from groupId(topic)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55",
    "privateDnsZoneId : DINE create private endpoint resource(A records) for Event Hubs from groupId(namespace)_1": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55"
   },
   "createdBy": "a3e3cca2-170d-40e8-b490-b298da8fceba",
   "createdOn": "2023-01-06T09:37:32.6578218Z",
   "updatedBy": null,
   "updatedOn": null
  },
  "parameters": {
   "IoTDPS": {
    "type": "string",
    "metadata": {
     "displayName": "IoT DPS",
     "description": "private DNS zone for IoT DPS",
     "strongType": "Microsoft.Network/privateDnsZones"
    },
    "defaultValue": "privatelink.azure-devices-provisioning.net"
   },
   "IoTHub": {
    "type": "string",
    "metadata": {
     "displayName": "IoT Hub",
     "description": "private DNS zone for IoT Hub",
     "strongType": "Microsoft.Network/privateDnsZones"
    },
    "defaultValue": "privatelink.azure-devices.net"
   },
   "ACR": {
    "type": "string",
    "metadata": {
     "displayName": "Azure Contaier Registry",
     "description": "private DNS zone for Azure Container Registry",
     "strongType": "Microsoft.Network/privateDnsZones"
    },
    "defaultValue": "privatelink.azurecr.io"
   },
   "Blob": {
    "type": "string",
    "metadata": {
     "displayName": "Blob Storage",
     "description": "private DNS zone for Blob",
     "strongType": "Microsoft.Network/privateDnsZones"
    },
    "defaultValue": "privatelink.blob.core.windows.net"
   },
   "RedisCache": {
    "type": "string",
    "metadata": {
     "displayName": "Redis Cache",
     "description": "private DNS zone for Azure Cache Redis",
     "strongType": "Microsoft.Network/privateDnsZones"
    },
    "defaultValue": "privatelink.redis.cache.windows.net"
   },
   "EventHub": {
    "type": "string",
    "metadata": {
     "displayName": "Event Hubs",
     "description": "private DNS zone for Event Hubs",
     "strongType": "Microsoft.Network/privateDnsZones"
    },
    "defaultValue": "privatelink.servicebus.windows.net"
   },
   "EventGridTopic": {
    "type": "string",
    "metadata": {
     "displayName": "Event Grid Topic",
     "description": "private DNS zone for Event Grid Custom Topic",
     "strongType": "Microsoft.Network/privateDnsZones"
    },
    "defaultValue": "privatelink.eventgrid.azure.net"
   },
   "ADX": {
    "type": "string",
    "metadata": {
     "displayName": "Azure Data Explorer",
     "description": "private DNS Zone for Azure Data Explorer",
     "strongType": "Microsoft.Network/privateDnsZones"
    },
    "defaultValue": "privatelink.japaneast.kusto.windows.net"
   },
   "IoTCentral": {
    "type": "string",
    "metadata": {
     "displayName": "IoT Central (IotApps)",
     "description": "private DNS zone for IoT Central (groupId=IotApps)",
     "strongType": "Microsoft.Network/privateDnsZones"
    },
    "defaultValue": "privatelink.azureiotcentral.com"
   },
   "ADT": {
    "type": "string",
    "metadata": {
     "displayName": "Azure Degital Twin",
     "description": "private DNS zone for Azure Digital Twin (groupId=API)",
     "strongType": "Microsoft.Network/privateDnsZones"
    },
    "defaultValue": "privatelink.digitaltwins.azure.net"
   }
  },
  "policyDefinitions": [
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) from groupId(blob)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/bcb9fc7d-cb1f-464b-a6ce-d671a6583290",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('Blob')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A record) from groupId(redisCache)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/72ee238d-71c9-449b-b299-3680e9ffabd2",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('RedisCache')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) from groupId(registry)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/1847ac82-fc0a-4745-b163-670bbe009a24",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('ACR')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) from groupId(iotHub)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/e36bea98-09cf-48c1-822a-958f756c4bf5",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('IoTHub')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) from groupId(iotDps)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/e36bea98-09cf-48c1-822a-958f756c4c00",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('IoTDPS')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) for IoT Central from groupId(IoTApps)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/e36bea98-09cf-48c1-822a-958f756c4c0b",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('IoTCentral')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) for ADX from groupId(cluster)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/e36bea98-09cf-48c1-822a-958f756c4c16",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('ADX')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) for ADT from groupId(API)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/773f8c02-7b5e-4258-a556-6dfa6da56f9a",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('ADT')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) for Event Grid  from groupId(topic)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/773f8c02-7b5e-4258-a556-6dfa6da56fb0",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('EventGridTopic')]"
     }
    },
    "groupNames": []
   },
   {
    "policyDefinitionReferenceId": "DINE create private endpoint resource(A records) for Event Hubs from groupId(namespace)_1",
    "policyDefinitionId": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policyDefinitions/773f8c02-7b5e-4258-a556-6dfa6da56fbb",
    "parameters": {
     "privateDnsZoneId": {
      "value": "[parameters('EventHub')]"
     }
    },
    "groupNames": []
   }
  ],
  "policyDefinitionGroups": []
 },
 "id": "/subscriptions/d9580795-79e6-48ed-95a0-c2ae49686f55/providers/Microsoft.Authorization/policySetDefinitions/3944aba8d1dd46f4ab843672",
 "type": "Microsoft.Authorization/policySetDefinitions",
 "name": "3944aba8d1dd46f4ab843672"
}